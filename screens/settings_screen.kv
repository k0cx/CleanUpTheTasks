<SettingsScreen>:

    MDBoxLayout:
        orientation: "vertical"
        spacing: "10dp"

        MDTopAppBar:
            # y: root.height - self.height
            type_height: "small"
            use_overflow: True
            elevation: 0
            opposite_colors: True
            title: "Settings"
            anchor_title: "left"
            # left_action_items: [["arrow-left", lambda x : root.back_action()]]

        MDLabel:
            text: "SYNCHRONIZATION\ncloud.mail.ru\nWebDav"
            color: 0, 0, 0, 1
            halign: "center"
            font_size: "20sp"

        MDTextField:
            id: login_field
            text: ""
            text_color_normal: 0, 0, 0, 1
            hint_text: "login"
            icon_left: "account"
            size_hint_x: .9
            pos_hint: {"center_x": .5, "center_y": .5}

        PasswordField:
            id: password_container
            size_hint_x: .9
            pos_hint: {"center_x": .5, "center_y": .5}

        MDRectangleFlatButton:
            text: "test connection"
            font_size: "14sp"
            size_hint_x: .9
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.check_client()

        MDRectangleFlatButton:
            text: "export to cloud"
            font_size: "18sp"
            size_hint_x: .9
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: 

        MDRectangleFlatButton:
            text: "import from cloud"
            font_size: "18sp"
            size_hint_x: .9
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: 

        MDGridLayout:
            orientation: "bt-rl"
            size_hint_x: 1
            adaptive_height: True
            rows: 1
            padding: "10dp", "10dp", "20dp", "30dp"
            spacing: "10dp"

            MDFlatButton:
                text: "[b]SAVE[/b]"
                font_size: "18sp"
                pos_hint: {"center_y": .5}
                on_release:
                    root.crypt_input()
                    root.back_action()

            MDFlatButton:
                # halign: "right"
                text: "CANCEL"
                font_size: "18sp"
                pos_hint: {"center_y": .5}
                on_release:
                    root.back_action()

<PasswordField>:
    size_hint_y: None
    height: password_field.height

    MDTextField:
        id: password_field
        hint_text: "password"
        text: ""
        password: True
        icon_left: "key-variant"

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: password_field.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            password_field.password = False if password_field.password is True else True