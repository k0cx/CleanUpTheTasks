<EditTaskScreen>:
    name: "edit task screen"
    
    MDBoxLayout:
        orientation: "vertical"
        padding:"10dp"
        # adaptive_height: True
        # size_hint_x: 1
        MDLabel:
            md_bg_color: "lightblue"
            text: "task edit screen"
            halign: "center"
        
        MDBoxLayout:
            id: edit_container

        MDTextField:
            id: edit_task_text
            hint_text: "Task text"
            max_text_length: 50
            max_length_text_color: "red"
            required: True
            # on_text_validate: (root.add_task(task_text, date_text.text))

        MDGridLayout:
            rows: 1
            cols: 2
            adaptive_height: True
            width: 1

            MDTextField:
                id: edit_date_text
                icon_left: "calendar"
                icon_left_color_normal: 0, 0, 0, 1
                halign: "right"
                hint_text: "date"
                on_focus: if self.focus: root.date_picker()
            
            MDIconButton:
                icon: "minus-thick"
                on_release: edit_date_text.text = ""

        MDGridLayout:
            orientation: "bt-rl"
            size_hint_x: 1
            adaptive_height: True
            rows: 1
            padding: 0, "20dp", "5dp", 0
                        
            MDFlatButton:
                text: "[b]SAVE[/b]"
                font_size: "18sp"
                spacing: "30dp", 0, "10dp", 0
                on_release: 
                    # root.write_task(task_text, date_text.text)
                    app.root.ids.container.clear_widgets()
                    app.on_start()
                    # root.clear_form()
                    app.root.transition.direction = "right"
                    app.root.current = "start screen"
                    app.root.ids.bottom_nav_bar.switch_tab("tasks_list")
                            
            MDFlatButton:
                halign: "right"
                text: "CANCEL"
                font_size: "18sp"
                on_release:
                    app.root.transition.direction = "right"
                    app.root.current = "start screen"
                    app.root.ids.bottom_nav_bar.switch_tab("tasks_list")
                    # root.clear_form()
            
            MDLabel:
                # spacer
            MDIconButton:
                icon: 'trash-can-outline'
                theme_text_color: "Custom"
                text_color: 1, 0, 0, 1
                # TODO: confirmation dialog
                # on_release:
                #     root.delete_item(the_list_item)
